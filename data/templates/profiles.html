{% extends "base.html" %}

{% load profiletags %}

{% block title %}Profiles of the Victims{% endblock %}

{% block content %}

<div class="home">


  <form method="get">

  <div class="row">
    <div class="col-md-8">
      <h1 style="margin-bottom:.5rem;">Profiles of the Victims</h1>
    </div>
    <div class="col-md-4">
      {% if selected %}<p><br><a href="?">Clear filters</a></p>{% endif %}
    </div>
    

    <!--
    * District (both)
    * Subdistrict (both)
    * Militant/Non-militant (both)
    -->
    
    
    <div class="form-group  filter col-4">
      <select class="form-control" id="classification" name="classification" onchange="this.form.submit()">
        <option value="">Classification</option>
        <option {% if selected_classification == 'Enforced Disappearance' %} selected=selected{% endif %} value="Enforced Disappearance">Enforced Disappearance</option>
        <option {% if selected_classification == 'Extrajudicial Execution' %} selected=selected{% endif %} value="Extrajudicial Execution">Extrajudicial Execution</option>
      </select>
    </div>
    
    <div class="form-group  filter col-4">
      <select class="form-control" id="gender" name="gender" onchange="this.form.submit()">
        <option value="">Gender</option>
        <option {% if selected_gender == 'Male' %} selected=selected{% endif %} value="Male">Male</option>
        <option {% if selected_gender == 'Female' %} selected=selected{% endif %} value="Female">Female</option>
      </select>
    </div>

    <div class="form-group filter col-4">
      <select class="form-control" id="year" name="year" onchange="this.form.submit()">
        <option value="">Year</option>
        {% for o in years %}
        <option{% if selected_year|add:"0" == o %} selected=selected{% endif %}>{{o}}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group filter col-4">
      <select class="form-control" id="age" name="age" onchange="this.form.submit()">
        <option value="">Age</option>
        <option{% if selected_age == '0-17' %} selected=selected{% endif %}>0-17</option>
        <option{% if selected_age == '18-34' %} selected=selected{% endif %}>18-34</option>
        <option{% if selected_age == '35-51' %} selected=selected{% endif %}>35-51</option>
        <option{% if selected_age == '52-68' %} selected=selected{% endif %}>52-68</option>
        <option{% if selected_age == '69-90' %} selected=selected{% endif %}>69-90</option>
      </select>
    </div>

    <div class="form-group filter col-4">
      <select class="form-control" id="caste" name="caste" onchange="this.form.submit()">
        <option value="">Caste</option>
        <option{% if selected_caste == 'Jat' %} selected=selected{% endif %}>Jat</option>
        <option{% if selected_caste == 'Ramgarhia' %} selected=selected{% endif %}>Ramgarhia</option>
        <option{% if selected_caste == 'Dalit/SC/BC' %} selected=selected{% endif %}>Dalit/SC/BC</option>
        <option{% if selected_caste == 'Mazbi' %} selected=selected{% endif %}>Mazbi</option>
        <option{% if selected_caste == 'Chamar' %} selected=selected{% endif %}>Chamar</option>
        <option{% if selected_caste == 'Khatri' %} selected=selected{% endif %}>Khatri</option>
        <option{% if selected_caste == 'Naee' %} selected=selected{% endif %}>Naee</option>
        <option{% if selected_caste == 'Other' %} selected=selected{% endif %}>Other</option>
      </select>
    </div>

    <div class="form-group filter col-4">
      <select class="form-control" id="religion" name="religion" onchange="this.form.submit()">
        <option value="">Religion</option>
        <option{% if selected_religion == 'Sikh' %} selected=selected{% endif %}>Sikh</option>
        <option{% if selected_religion == 'Hinduism' %} selected=selected{% endif %}>Hinduism</option>
        <option{% if selected_religion == 'Islam' %} selected=selected{% endif %}>Islam</option>
        <option{% if selected_religion == 'Christianity' %} selected=selected{% endif %}>Christianity</option>
        <option{% if selected_religion == 'No religion' %} selected=selected{% endif %}>No religion</option>
        <option{% if selected_religion == 'Other' %} selected=selected{% endif %}>Other</option>
      </select>
    </div>
    
  </div>

  </form>


  <br><br>



  <div class="row victims">

  {% regroup victims by year as year_list %}

    {% for year in year_list %}

    <div class="col-6 col-sm-4 col-md-3"> 
      <div class="home-box year">
      {% if year.grouper == None %}
        <h3>Date Unknown</h3>
      {% else %}
        <h3>{{year.grouper|date:"Y"}}</h3>
      {% endif %}
      </div>
    </div>

    {% for victim in year.list %}

    <div class="col-6 col-sm-4 col-md-3 victim" onclick="window.location.href='/profile/{{victim.record_id}}';" id="p{{victim.record_id}}">

     {% if victim.photo_vic_fn %}
      <div class="home-box" style="background-image:url({% hphoto victim.photo_vic_fn %})">
     {% else %}
      <div class="home-box" style="background-image:url(/static/images/gray.jpg)">
     {% endif %}
      </div>

        <div class="names">
          <h5 style="margin: 0;"><a href="/profile/{{victim.record_id}}">{{victim.victim_name}}</a></h5>
          {{victim.village_name}}<br>
          {% if victim.victim_disappeared_killed == 2 %}
            Extrajudicial execution,
          {% endif %}
          {% if victim.victim_disappeared_killed == 1 %}
            Disappeared,
          {% endif %}
          {% hdateslash victim.timeline_start victim.timeline_end %}
          <p><br></p>
        </div>

    </div>
    {% endfor %}
    {% endfor %}

  </div>
</div>


{% if victims %}{% else %}
  <div class="row"> 
    <div class="col-12"> 
    <p>No matching results for
    {% for t in selected %} {% if not forloop.first %} and {% endif %} <strong>{{ t }}</strong> {% endfor %}</p>
  </div>
</div>
{% endif %}

{% endblock %}
